<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Generator link feedback KFC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://kfclistenscx.qualtrics.com/CP/Graphic.php?IM=IM_dbC1Qsmkf9X2Bmu">
  <style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

:root {
  --kfc-red: #e4002b;
  --kfc-dark: #1d1d1d;
  --kfc-light: #ffffff;
  --gray-bg: #f4f4f4;
  --input-border: #ccc;
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background-color: var(--gray-bg);
  color: var(--kfc-dark);
}

header {
  background-color: var(--kfc-light);
  padding: 14px 24px;
  display: flex;
  align-items: center;
  border-bottom: 3px solid var(--kfc-red);
  box-shadow: var(--shadow);
}

header img {
  height: 48px;
  margin-right: 16px;
}

header h1 {
  font-size: 22px;
  color: var(--kfc-red);
  margin: 0;
  font-weight: 600;
}

main {
  max-width: 700px;
  margin: 30px auto;
  padding: 24px;
  background: var(--kfc-light);
  border-radius: 12px;
  box-shadow: var(--shadow);
}

h2 {
  text-align: center;
  margin-bottom: 24px;
  color: var(--kfc-dark);
  font-size: 20px;
  font-weight: 600;
}

label {
  display: block;
  margin-top: 18px;
  font-weight: 600;
  font-size: 15px;
}

input[type="text"],
input[type="date"],
input[type="time"],
input[type="number"],
button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin-top: 8px;
  border: 1px solid var(--input-border);
  border-radius: 6px;
  box-sizing: border-box;
  transition: 0.2s;
}

input:focus {
  outline: none;
  border-color: var(--kfc-red);
  box-shadow: 0 0 0 3px rgba(228, 0, 43, 0.1);
}

button {
  background-color: var(--kfc-red);
  color: white;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s;
}

button:hover {
  background-color: #b80020;
}

.link-container {
  margin-top: 30px;
}

.link-box {
  background: #ffffff;
  padding: 16px;
  border: 1px solid #ddd;
  border-radius: 10px;
  margin-bottom: 18px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s;
}

.link-box:hover {
  transform: scale(1.01);
}

.link-box a {
  color: #111;
  font-weight: 500;
  font-size: 15px;
  text-decoration: none;
  word-break: break-word;
  display: block;
  margin-bottom: 10px;
}

.link-box a:hover {
  text-decoration: underline;
}

.button-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

.button-row button {
  flex: 1;
  min-width: 120px;
  font-size: 14px;
  background-color: var(--kfc-dark);
  font-weight: 500;
}

.proxy-container {
  margin-top: 30px;
  text-align: center;
}

.proxy-container button {
  width: 48%;
  margin: 8px 1%;
  background-color: #444;
}

#qr-scanner {
  display: none;
  width: 100%;
  margin-top: 10px;
  border: 2px dashed #ccc;
  border-radius: 6px;
  padding: 10px;
}

@media (max-width: 600px) {
  main {
    margin: 20px;
    padding: 18px;
  }

  .button-row {
    flex-direction: column;
  }

  .proxy-container button {
    width: 100%;
    margin: 8px 0;
  }

  header h1 {
    font-size: 18px;
  }
}

/* –î–ª—è –Ω–∏–∫–Ω–µ–π–º–∞ –≤ —Ö–µ–¥–µ—Ä–µ */
.nickname {
  margin-left: auto;
  font-weight: 500;
  color: #888;
  font-size: 16px;
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

.nickname:hover {
  opacity: 1;
  color: var(--kfc-red);
}

  </style>
</head>
<body>

<header id="pageHeader">
  <img src="https://kfclistenscx.qualtrics.com/CP/Graphic.php?IM=IM_dbC1Qsmkf9X2Bmu" alt="KFC Logo">
  <h1>Generator link feedback KFC</h1>
  <div class="nickname">AlexBv</div>
</header>


<main>
  <h2>GenereazƒÉ linkuri pentru feedback</h2>

  <label>1. ScaneazƒÉ QR sau √ÆncarcƒÉ o imagine:</label>
  <button onclick="startQRScanner()">üì∑ CamerƒÉ</button>
  <input type="file" id="imageInput" accept="image/*">
  <div id="qr-scanner"></div>

  <label>2. Link din QR:</label>
  <input type="text" id="scannedResult" placeholder="Aici apare linkul scanat">

  <label>3. DatƒÉ (implicit astƒÉzi):</label>
  <input type="date" id="selectedDate">

  <label>4. Ora de √Ænceput:</label>
  <input type="time" id="startTime">

  <label>5. Ora de sf√¢r»ôit:</label>
  <input type="time" id="endTime">

  <label>6. C√¢te linkuri sƒÉ se genereze:</label>
  <input type="number" id="linkCount" value="10">

  <button onclick="generateLinks()">üîó GenereazƒÉ linkuri</button>

  <div id="links" class="link-container"></div>

  <div class="proxy-container">
    <button onclick="window.open('https://proxyium.com', '_blank')">üåê Deschide Proxyium</button>
    <button onclick="window.open('https://www.croxyproxy.com', '_blank')">üåê Deschide CroxyProxy</button>
  </div>
  <button onclick="clearUsedLinks()" style="background:#555;color:#fff;width:100%;margin-top:20px;">üßπ CurƒÉ»õƒÉ linkuri folosite</button>

</main>

<script>
  function copyLink(link) {
    navigator.clipboard.writeText(link).then(() => {
      alert("Link copiat!");
    });
  }

  function openProxyium(link) {
    // –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —É–∂–µ –≥–æ—Ç–æ–≤—É—é —Å—Å—ã–ª–∫—É, –±–µ–∑ encodeURIComponent!
    navigator.clipboard.writeText(link).then(() => {
      window.open("https://www.proxyium.com", "_blank");
    });
  }

  function openCroxy(link) {
    navigator.clipboard.writeText(link).then(() => {
      window.open("https://www.croxyproxy.com", "_blank");
    });
  }
  // SalvƒÉm linkurile folosite
function markLinkAsUsed(link) {
  let used = JSON.parse(localStorage.getItem("usedLinks") || "[]");
  if (!used.includes(link)) {
    used.push(link);
    localStorage.setItem("usedLinks", JSON.stringify(used));
  }
}

// VerificƒÉm dacƒÉ linkul a fost folosit deja
function isLinkUsed(link) {
  let used = JSON.parse(localStorage.getItem("usedLinks") || "[]");
  return used.includes(link);
}

// »òterge toate linkurile folosite
function clearUsedLinks() {
  localStorage.removeItem("usedLinks");
  alert("Linkurile folosite au fost »ôterse!");
  location.reload();
}

</script>



<script src="https://unpkg.com/html5-qrcode"></script>
<script>
  let html5QrCode;

  function setDefaultDateTime() {
    const now = new Date();
    document.getElementById("selectedDate").valueAsDate = now;
    document.getElementById("startTime").value = "10:00";
    document.getElementById("endTime").value = now.toTimeString().slice(0, 5);
  }

  function startQRScanner() {
    const scannerDiv = document.getElementById("qr-scanner");
    scannerDiv.style.display = "block";
    html5QrCode = new Html5Qrcode("qr-scanner");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      qrCodeSuccess
    ).catch(err => alert("Eroare camerƒÉ: " + err));
  }

  function qrCodeSuccess(decodedText) {
    document.getElementById("scannedResult").value = decodedText;
    html5QrCode.stop().then(() => {
      document.getElementById("qr-scanner").style.display = "none";
    });
  }

  document.getElementById("imageInput").addEventListener("change", function () {
    const file = this.files[0];
    if (!file) return;
    const qr = new Html5Qrcode("qr-scanner");
    qr.scanFile(file, true).then(decodedText => {
      document.getElementById("scannedResult").value = decodedText;
    }).catch(() => alert("QR nu a fost gƒÉsit √Æn imagine"));
  });

  function parseLinkData(link) {
    const url = new URL(link);
    const params = new URLSearchParams(url.search);
    return {
      S: params.get("S"),
      dateTime: decodeURIComponent(params.get("D")),
      TI: parseInt(params.get("TI")),
      lang: params.get("Q_Language") || "RO"
    };
  }

  function generateLinks() {
    const link = document.getElementById("scannedResult").value.trim();
    const date = document.getElementById("selectedDate").value;
    const startTime = document.getElementById("startTime").value;
    const endTime = document.getElementById("endTime").value;
    const count = parseInt(document.getElementById("linkCount").value);

    if (!link || !date || !startTime || !endTime || !count) {
      alert("CompleteazƒÉ toate c√¢mpurile!");
      return;
    }

    const data = parseLinkData(link);
    const base = "https://customer.kfc-listens.com/jfe/form/SV_7WmLtfIDJuM3Vn8";
    const start = new Date(`${date}T${startTime}`);
    const end = new Date(`${date}T${endTime}`);
    const now = new Date();

    if (end < start) {
      alert("Ora de sf√¢r»ôit nu poate fi √Ænaintea celei de √Ænceput!");
      return;
    }
    if (end > now) {
      alert("Ora de sf√¢r»ôit nu poate fi √Æn viitor!");
      return;
    }

    const diff = (end - start) / count;
    let linksHTML = "";

    for (let i = 0; i < count; i++) {
      const ti = data.TI - (count - i - 1);
      const time = new Date(start.getTime() + diff * i);
      const dd = String(time.getDate()).padStart(2, "0");
      const mm = String(time.getMonth() + 1).padStart(2, "0");
      const yyyy = time.getFullYear();
      const hh = String(time.getHours()).padStart(2, "0");
      const mi = String(time.getMinutes()).padStart(2, "0");

      const encodedDateTime = encodeURIComponent(`${dd}/${mm}/${yyyy}%20${hh}:${mi}`);
      const fullLink = `${base}?S=${data.S}&D=${encodedDateTime}&TI=${ti}&Q_Language=${data.lang}`;

     if (isLinkUsed(fullLink)) continue;

linksHTML += `<div class="link-box">
  <a href="${fullLink}" target="_blank">${decodeURIComponent(fullLink)}</a>
  <div class="button-row">
    <button onclick="copyAndMark('${fullLink}')">üìã CopiazƒÉ</button>
    <button onclick="openAndMark('${fullLink}')">üîì Deschide</button>
    <button onclick="openProxyium('${fullLink}', event)">üåêVPNProxyium</button>
	<button onclick="openCroxy('${fullLink}', event)">üõ°Ô∏èVPNCroxyProxy</button>
  </div>
</div>`;


    }

    document.getElementById("links").innerHTML = linksHTML;
  }
  function copyLink(text) {
    navigator.clipboard.writeText(decodeURIComponent(text))
      .then(() => alert("Copiat!"))
      .catch(() => alert("Copierea nu a reu»ôit"));
  }

function copyAndMark(link) {
  copyLink(link);
  markLinkAsUsed(link);
  event.target.closest('.link-box').style.opacity = 0.4;
}

function openAndMark(link) {
  window.open(decodeURIComponent(link), '_blank');
  markLinkAsUsed(link);
  event.target.closest('.link-box').style.opacity = 0.4;
}


function openProxyium(link, event) {
  const decodedLink = decodeURIComponent(link);
  navigator.clipboard.writeText(decodedLink).then(() => {
    markLinkAsUsed(link);
    event.target.closest('.link-box').style.opacity = 0.4;
    window.open("https://www.proxyium.com", "_blank");
  });
}

function openCroxy(link, event) {
  const decodedLink = decodeURIComponent(link);
  navigator.clipboard.writeText(decodedLink).then(() => {
    markLinkAsUsed(link);
    event.target.closest('.link-box').style.opacity = 0.4;
    window.open("https://www.croxyproxy.com", "_blank");
  });
}


  setDefaultDateTime();

</script>
</body>
</html>
